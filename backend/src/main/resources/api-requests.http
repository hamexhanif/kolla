### ========================================
### Auth
### ========================================

### Login (Username + Password)
# Optional: tenantId kann mitgesendet werden, ist aber nicht erforderlich.
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "adminpassword"
}

### Kopiere den token aus der Antwort und setze ihn in die Requests unten:
# Authorization: Bearer <TOKEN>

### ========================================
### Task & TaskStep Endpunkte
### ========================================

### ===================================================================
### WORKFLOW MANAGER DASHBOARD ENDPUNKTE
### ===================================================================

### Ruft die zusammengefassten Dashboard-Daten für den Manager ab
#   - Benötigt für die Kacheln "Open Tasks", "Overdue", etc. im Manager-Dashboard.
GET http://localhost:8080/api/manager/dashboard
Authorization: Bearer {{jwt_token}} // Später einkommentieren


### Ruft die vollständige Task-Liste für das Manager-Dashboard ab
#   - Benötigt für die Tabelle mit allen Tasks.
GET http://localhost:8080/api/tasks
Authorization: Bearer <TOKEN>

### ===================================================================
### AKTIONEN (Aufgaben bearbeiten)
### ===================================================================

### Aktion 1: Einen Arbeitsschritt abschließen
#   - Simuliert, dass der "developer" (userId: 2) den ersten Schritt (stepId: 1) des ersten Tasks (taskId: 1) abschließt.
POST http://localhost:8080/api/task-steps/1/complete
Content-Type: application/json
Authorization: Bearer <TOKEN>

{
  "taskId": 1,
  "userId": 2
}


### Test 3: Überprüfe das Ergebnis
# Rufe die Liste der Tasks erneut ab.
# Du wirst in der Antwort sehen, dass der erste Schritt jetzt den Status "COMPLETED"
# und der zweite Schritt den Status "ASSIGNED" hat. Der "currentStepIndex" des Tasks wird auf 1 stehen.
GET http://localhost:8080/api/tasks
Authorization: Bearer <TOKEN>

### Setze die Priorität für Schritt 2 manuell auf "sofort" (1)
POST http://localhost:8080/api/task-steps/2/set-priority
Content-Type: application/json
Authorization: Bearer <TOKEN>

{
  "manualPriority": 1
}
